<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>hadoop完全分布式集集群配置 - CubeInfinity</title><meta name="Description" content="welcome to CUBE"><meta property="og:title" content="hadoop完全分布式集集群配置" />
<meta property="og:description" content="做完ssh免密可以开始准备配置hadoop完全分布式集群了 *打开hadoop的解压缩文档。 ../share/doc/hadoop/index.html overview（看不懂） 与之前版本的区别（都是" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/" /><meta property="og:image" content="http://example.org/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T00:00:00+08:00" />
<meta property="article:modified_time" content="2024-01-03T00:00:00+08:00" /><meta property="og:site_name" content="CubeInfinity" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/logo.png"/>

<meta name="twitter:title" content="hadoop完全分布式集集群配置"/>
<meta name="twitter:description" content="做完ssh免密可以开始准备配置hadoop完全分布式集群了 *打开hadoop的解压缩文档。 ../share/doc/hadoop/index.html overview（看不懂） 与之前版本的区别（都是"/>
<meta name="application-name" content="Hi!CUBE">
<meta name="apple-mobile-web-app-title" content="Hi!CUBE"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://example.org/posts/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/" /><link rel="prev" href="http://example.org/posts/l2scala%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "hadoop完全分布式集集群配置",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/example.org\/posts\/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE\/"
        },"genre": "posts","wordcount":  3621 ,
        "url": "http:\/\/example.org\/posts\/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE\/","datePublished": "2024-01-03T00:00:00+08:00","dateModified": "2024-01-03T00:00:00+08:00","publisher": {
            "@type": "Organization",
            "name": "","logo": {
                    "@type": "ImageObject",
                    "url": "http:\/\/example.org\/images\/avatar.png",
                    "width":  960 ,
                    "height":  960 
                }},"author": {
                "@type": "Person",
                "name": "Cai"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="CubeInfinity"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>CubeInfinity</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="Posts"> 文章 </a><a class="menu-item" href="/tags/" title="Tags"> 标签 </a><a class="menu-item" href="/categories/" title="Categories"> 分类 </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="CubeInfinity"><span class="header-title-pre"><i class='far fa-kiss-wink-heart fa-fw' aria-hidden='true'></i></span>CubeInfinity</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="Search titles or contents..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="Search">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="Clear">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        Cancel
                    </a>
                </div><a class="menu-item" href="/posts/" title="Posts">文章</a><a class="menu-item" href="/tags/" title="Tags">标签</a><a class="menu-item" href="/categories/" title="Categories">分类</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">Contents</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">hadoop完全分布式集集群配置</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Cai</a></span>&nbsp;<span class="post-category">included in <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AEhadoop%E9%9B%86%E7%BE%A4%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>大数据:Hadoop集群完全分布式</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-01-03">2024-01-03</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;3621 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;8 minutes&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="true">
                <div class="details-summary toc-title">
                    <span>Contents</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#11-hadoopenvsh">1.1 hadoop.env.sh</a></li>
    <li><a href="#12-core-sitexml">1.2 core-site.xml</a></li>
    <li><a href="#13-hdfs-sitexml">1.3 hdfs-site.xml</a></li>
    <li><a href="#14-yarn-sitexml">1.4 yarn-site.xml</a></li>
    <li><a href="#15-mapred-sitexml">1.5 mapred-site.xml</a></li>
    <li><a href="#16-workers">1.6 workers</a></li>
    <li><a href="#17-分发脚本">1.7 分发脚本</a></li>
  </ul>

  <ul>
    <li><a href="#21-namenode格式化">2.1 namenode格式化</a></li>
    <li><a href="#22-启动集群">2.2 启动集群</a>
      <ul>
        <li><a href="#220-节点启动异常">*2.2.0 节点启动异常：</a></li>
      </ul>
    </li>
  </ul>

  <ul>
    <li><a href="#31-远程集群使用">3.1 远程集群使用</a>
      <ul>
        <li><a href="#-mkdir">-mkdir</a></li>
        <li><a href="#-ls">-ls</a></li>
        <li><a href="#-put---copyfromlocal">-put  -copyFromLocal</a></li>
        <li><a href="#-get--copytolocal">-get -copyToLocal</a></li>
        <li><a href="#-cat">-cat</a></li>
        <li><a href="#-appendtofile">-appendToFile</a></li>
        <li><a href="#-cp">-cp</a></li>
        <li><a href="#-movefromlocal--movetolocal--mv">-moveFromLocal, -moveToLocal, -mv</a></li>
        <li><a href="#-rm">-rm</a></li>
        <li><a href="#-rmdir">-rmdir</a></li>
        <li><a href="#-touch">-touch</a></li>
      </ul>
    </li>
    <li><a href="#32-hdfs文件对应本地文件">3.2 hdfs文件对应本地文件</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>做完ssh免密可以开始准备配置hadoop完全分布式集群了</p>
<h1 id="打开hadoop的解压缩文档">*打开hadoop的解压缩文档。</h1>
<ul>
<li>../share/doc/hadoop/index.html
<ul>
<li>overview（看不懂） 与之前版本的区别（都是细节），没必要多看。</li>
<li>Single Node Setup
<ul>
<li>Local (Standablone 标准的集群模式) Mode 单机模式（和spark一样，现在统称local模式，单机模式）</li>
<li>Pseudo-Distributed Mode 单机模式（伪集群 用线程模拟，不做）</li>
<li>Fully-Distributed Mode （标准集群模式）</li>
</ul>
</li>
</ul>
</li>
<li>系统内部的安全模式都关闭</li>
<li>单节点模式，略过。</li>
</ul>
<p><strong>集群Cluster Setup</strong></p>
<p>../share/doc/hadoop/hadoop-project-dist/hadoop-common/Cluster/ClusterSetup.html</p>
<p>*不作高可用(需要至少使用3个节点)的情况下。</p>
<p>*身份认证<code>Kerberos</code> 也不做。</p>
<ul>
<li>预先的要求：java；a stable version of Hadoop</li>
</ul>
<p><strong>installation</strong></p>
<ul>
<li>
<p>*choose installing it via a packageing system as appropriate for your operating system.  &ndash;&gt;此方式可以写个脚本实现</p>
</li>
<li>
<p>1：namenode；2/3：ResourceManager (不做高可用)</p>
<ul>
<li>namenode: 主节点，master，一台机器</li>
<li>datanode: 数据节点，worker，其他机器</li>
</ul>
</li>
<li>
<p>设置hadoop集群 没有安全策略（集群视作一台电脑）（ubuntu 两种安全策略默认关闭）</p>
</li>
<li>
<p>Read-only default configuration 和 Site-specific configuration 自己选择是否写，<strong>不写就采用default configuration</strong></p>
</li>
<li>
<p><strong>以下是配置 Site-specific configuration 的内容。</strong></p>
</li>
</ul>
<h1 id="1-完全分布式集群配置">1 完全分布式集群配置</h1>
<ul>
<li>
<p>在家目录下新建文件夹<code>hadoopConf</code>,内部再新建<code>config</code>和<code>readOnly</code>.</p>
</li>
<li>
<p>需要配置的文件：<code>etc/hadoop/core-site.xml</code>, <code>etc/hadoop/hdfs-site.xml</code>, <code>etc/hadoop/yarn-site.xml</code> ,<code>etc/hadoop/mapred-site.xml</code>,<code>etc/hadoop/hadoop-env.sh</code> and <code>etc/hadoop/yarn-env.sh</code></p>
</li>
<li>
<p><code>config</code>：core-site.xml,hdfs-site.xml,yarn-site.xml,mapred-site.xml,hadoop-env.sh,yarn-env.sh.</p>
</li>
<li>
<p><code>readOnly</code>：core-default.xml,hdfs-default.xml,yarn-default.xml,mapred-default.xml.</p>
<p>由上&quot;不写就采用default configuration&quot;可知。如果不在配置文件中写入对应的配置，则按照只读文件的配置执行。</p>
</li>
</ul>
<p>为了更好地利用图形化界面配置文件，安装一个vscode：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo snap install --classic code
</span></span></code></pre></div><h2 id="11-hadoopenvsh">1.1 hadoop.env.sh</h2>
<ul>
<li>
<p>增加两个环境变量: <code>HADOOP_PID_DIR</code> , <code>HADOOP_LOG_DIR</code>,同时需要建立两个文件夹，将这两个环境变量指向文件夹的地址。</p>
<ul>
<li>在home下新建<code>hadoopData</code>——存放<code>HADOOP_PID_DIR</code> , <code>HADOOP_LOG_DIR</code></li>
</ul>
</li>
<li>
<p>在hadoop-env.sh下配置</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>export JAVA_HOME<span style="color:#f92672">=</span>/usr/java
</span></span><span style="display:flex;"><span>export HADOOP_PID_DIR<span style="color:#f92672">=</span>/home/hadoop/hadoopData/HADOOP_LOG_DIR
</span></span><span style="display:flex;"><span>export HADOOP_LOG_DIR<span style="color:#f92672">=</span>/home/hadoop/hadoopData/HADOOP_PID_DIR
</span></span></code></pre></div><p>（此图是之前用户还是bigdata3的时候截的，不用在意，按照上方路径即可。）</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231205133131939.png"
        data-srcset="/asserts/bigdata/image-20231205133131939.png, /asserts/bigdata/image-20231205133131939.png 1.5x, /asserts/bigdata/image-20231205133131939.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231205133131939.png"
        title="image-20231205133131939" /></p>
</li>
<li>
<p>做两个脚本：一个脚本是分发到所有的节点；一个脚本是只配置到本节点。（见-1.7）</p>
</li>
</ul>
<h2 id="12-core-sitexml">1.2 core-site.xml</h2>
<ul>
<li>
<p>配置fs.defaultFS需要NameNode URI需要把namenode节点名字(域名)拷过去。</p>
</li>
<li>
<p>io.file.buffer.size，默认4096（也可以，就是慢了点）。</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;configuration&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>fs.defaultFS<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>hdfs://master:9000/<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>io.file.buffer.size<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>131072<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/configuration&gt;</span>
</span></span></code></pre></div><p>在之后的配置内容中还有新设置（解释见下章）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>hadoop.tmp.dir<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>/home/hadoop/hadoopData<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>A base for other temporary directories.<span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span></code></pre></div><h2 id="13-hdfs-sitexml">1.3 hdfs-site.xml</h2>
<p><strong>hdfs-site.xml当前不修改</strong></p>
<p>（注意<code>&lt;configuration&gt;&lt;/configuration&gt;</code>别一不小心删掉了！）</p>
<ul>
<li>
<p>配置 configuration for NameNode./DataNode 分配有区别。但NameNode配置中，blocksize过大（256M）、handler.count过深（100） 有点没必要。因此不用分开配置。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231180149770.png"
        data-srcset="/asserts/bigdata/image-20231231180149770.png, /asserts/bigdata/image-20231231180149770.png 1.5x, /asserts/bigdata/image-20231231180149770.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231180149770.png"
        title="image-20231231180149770" /></p>
</li>
<li>
<p>dfs.namenode.name.dir和dfs.datanode.data.dir的默认设置如下：</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>dfs.namenode.name.dir<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>file://${hadoop.tmp.dir}/dfs/name<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>Determines where on the local filesystem the DFS name node
</span></span><span style="display:flex;"><span>      should store the name table(fsimage).  If this is a comma-delimited list
</span></span><span style="display:flex;"><span>      of directories then the name table is replicated in all of the
</span></span><span style="display:flex;"><span>      directories, for redundancy. <span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>dfs.datanode.data.dir<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>file://${hadoop.tmp.dir}/dfs/data<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>Determines where on the local filesystem an DFS data node
</span></span><span style="display:flex;"><span>  should store its blocks.  If this is a comma-delimited
</span></span><span style="display:flex;"><span>  list of directories, then data will be stored in all named
</span></span><span style="display:flex;"><span>  directories, typically on different devices. The directories should be tagged
</span></span><span style="display:flex;"><span>  with corresponding storage types (<sup>SSD</sup>/<sub>DISK</sub>/<sup>ARCHIVE</sup>/<sub>RAM_DISK</sub>) for HDFS
</span></span><span style="display:flex;"><span>  storage policies. The default storage type will be DISK if the directory does
</span></span><span style="display:flex;"><span>  not have a storage type tagged explicitly. Directories that do not exist will
</span></span><span style="display:flex;"><span>  be created if local filesystem permission allows.
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span></code></pre></div><p>都指向了变量：{hadoop.tmp.dir}，</p>
<ul>
<li>搜索此变量设置位置：默认值在core-default.xml中设置</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>hadoop.tmp.dir<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>/tmp/hadoop-${user.name}<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>A base for other temporary directories.<span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span></code></pre></div><p>因此在 core-site.xml中修改hadoop.tmp.dir的值，把它指向自己新建的文件夹中，就不必分开修改两处(不同)的配置了。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>hadoop.tmp.dir<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>/home/bigdata3/HADOOP/hadoopData<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>A base for other temporary directories.<span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span></code></pre></div><ul>
<li>dfs.blocksize的默认设置，128M，足够，不再进行设置</li>
<li>dfs.namenode.handler.count默认嵌套深度，10，做实验足够，不修改</li>
</ul>
<h2 id="14-yarn-sitexml">1.4 yarn-site.xml</h2>
<p><strong>yarn-site.xml当前不修改</strong></p>
<ul>
<li>
<p>Configurations for ResourceManager and NodeManager: 没说一定要设置就保持默认。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231180832696.png"
        data-srcset="/asserts/bigdata/image-20231231180832696.png, /asserts/bigdata/image-20231231180832696.png 1.5x, /asserts/bigdata/image-20231231180832696.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231180832696.png"
        title="image-20231231180832696" /></p>
</li>
<li>
<p>yarn.resourcemanager.address，如果设置，将覆盖yarn.resourcemanager.hostname 的值。（后续相同）</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231181358918.png"
        data-srcset="/asserts/bigdata/image-20231231181358918.png, /asserts/bigdata/image-20231231181358918.png 1.5x, /asserts/bigdata/image-20231231181358918.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231181358918.png"
        title="image-20231231181358918" /></p>
<ul>
<li>查看默认值：</li>
</ul>
</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231205145201511.png"
        data-srcset="/asserts/bigdata/image-20231205145201511.png, /asserts/bigdata/image-20231205145201511.png 1.5x, /asserts/bigdata/image-20231205145201511.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231205145201511.png"
        title="image-20231205145201511" /></p>
<p>​	value 0.0.0.0 ——匹配你当前的ip地址。即从哪里（哪个主机上启动），表示按照当前主机的ip地址。</p>
<ul>
<li>故当前不用修改，后续类似的都不修改。</li>
</ul>
<p>*所有设计到硬件设置的通通不改。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231202537887.png"
        data-srcset="/asserts/bigdata/image-20231231202537887.png, /asserts/bigdata/image-20231231202537887.png 1.5x, /asserts/bigdata/image-20231231202537887.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231202537887.png"
        title="image-20231231202537887" /></p>
<h2 id="15-mapred-sitexml">1.5 mapred-site.xml</h2>
<ul>
<li>
<p>mapreduce.framework.name 默认是local模式，需要修改，把local改成yarn</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231203113386.png"
        data-srcset="/asserts/bigdata/image-20231231203113386.png, /asserts/bigdata/image-20231231203113386.png 1.5x, /asserts/bigdata/image-20231231203113386.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231203113386.png"
        title="image-20231231203113386" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231202916480.png"
        data-srcset="/asserts/bigdata/image-20231231202916480.png, /asserts/bigdata/image-20231231202916480.png 1.5x, /asserts/bigdata/image-20231231202916480.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231202916480.png"
        title="image-20231231202916480" /></p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>mapreduce.framework.name<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>yarn<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>The runtime framework for executing MapReduce jobs.
</span></span><span style="display:flex;"><span>  Can be one of local, classic or yarn.
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span></code></pre></div><ul>
<li>mapreduce.jobhistory.intermediate-done-dir的默认值是：</li>
</ul>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231203347059.png"
        data-srcset="/asserts/bigdata/image-20231231203347059.png, /asserts/bigdata/image-20231231203347059.png 1.5x, /asserts/bigdata/image-20231231203347059.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231203347059.png"
        title="image-20231231203347059" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231205150742356.png"
        data-srcset="/asserts/bigdata/image-20231205150742356.png, /asserts/bigdata/image-20231205150742356.png 1.5x, /asserts/bigdata/image-20231205150742356.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231205150742356.png"
        title="image-20231205150742356" /></p>
<p>指向变量 {yarn.app.mapreduce.am.staging-dir} ，默认设置的值是<code>/tmp/hadoop-yarn/staging</code></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231205150900031.png"
        data-srcset="/asserts/bigdata/image-20231205150900031.png, /asserts/bigdata/image-20231205150900031.png 1.5x, /asserts/bigdata/image-20231205150900031.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231205150900031.png"
        title="image-20231205150900031" /></p>
<p>将其指向自己设定的目录（新建一个目录）：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;property&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>yarn.app.mapreduce.am.staging-dir<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;value&gt;</span>/home/hadoop/hadoopData/staging<span style="color:#f92672">&lt;/value&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>The staging dir used while submitting jobs.
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/property&gt;</span>
</span></span></code></pre></div><ul>
<li>因此通过修改yarn.app.mapreduce.am.staging-dir达到了同时修改 mapreduce.jobhistory.intermediate-done-dir 、mapreduce.jobhistory.done-dir 的目的。</li>
</ul>
<h2 id="16-workers">1.6 workers</h2>
<p>将datanode节点写入此文件。</p>
<p>*一行一个。</p>
<p>workers</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>slave0
</span></span><span style="display:flex;"><span>slave1
</span></span></code></pre></div><p>配置结束</p>
<h2 id="17-分发脚本">1.7 分发脚本</h2>
<ul>
<li>
<p>修改完配置文件需要进行分发：写脚本把配好的文件传入软件包内</p>
</li>
<li>
<p>allNodeDistri.sh localDistri.sh （在<code>hadoopConf</code> 中）</p>
</li>
<li>
<p>加权限使其可执行：<code>chmod +x localDistri.sh</code>  (注意 这里因为hadoop文件夹是在系统中，故需要sudo提权，老师的案例是不需要的)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>echo Distribution to local nodes
</span></span><span style="display:flex;"><span>sudo cp config/* /usr/hadoop/etc/hadoop
</span></span></code></pre></div></li>
<li>
<p>allNodeDistri.sh</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>echo Distribution configuration to all host
</span></span><span style="display:flex;"><span>sudo cp config/* /usr/hadoop/etc/hadoop
</span></span><span style="display:flex;"><span>scp slave0:config/* /usr/hadoop/etc/hadoop
</span></span><span style="display:flex;"><span>scp slave1:config/* /usr/hadoop/etc/hadoop
</span></span></code></pre></div><p>或（以下是老师的路径，个人路径自己调整）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>echo Distribution configuration to all host
</span></span><span style="display:flex;"><span>scp /home/bigdata3/hadoopConfig/config/*  master:/home/bigdata3/software/hadoop-3.3.6/etc/hadoop
</span></span><span style="display:flex;"><span>scp /home/bigdata3/hadoopConfig/config/*  slave0:/home/bigdata3/software/hadoop-3.3.6/etc/hadoop
</span></span><span style="display:flex;"><span>scp /home/bigdata3/hadoopConfig/config/*  slave1:/home/bigdata3/software/hadoop-3.3.6/etc/hadoop
</span></span></code></pre></div></li>
</ul>
<h1 id="2-集群启动">2 集群启动</h1>
<p>*定时地运行脚本，检查各节点是否健康，先不管它，</p>
<ul>
<li>
<p>格式化只能在namenode上格式化</p>
</li>
<li>
<p>一个一个分头执行太麻烦，在sbin中有一个start-all节点。</p>
</li>
<li>
<p>pdsh?</p>
</li>
</ul>
<h2 id="21-namenode格式化">2.1 namenode格式化</h2>
<p>namenode格式化在namenode节点上进行，初始化hdfs文件系统，格式化的效果是可以在namenode上看到我们设置的目录建立起来。</p>
<p>集群第一次启动时，会在所有节点上建立hdfs文件系统，效果是可以在所有节点上看到数据目录建立起来。</p>
<p>namenode第一次格式化后，<strong>不能再次进行格式化</strong>，否则会进入数据保护模式（安全模式）。</p>
<p>如果要进行第二次格式化，需要删除所有节点上的数据目录。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>rm -rf hadoopData/
</span></span></code></pre></div><ul>
<li>格式化</li>
</ul>
<pre tabindex="0"><code>hdfs namenode -format
</code></pre><h2 id="22-启动集群">2.2 启动集群</h2>
<p>手册上推荐单独启动。</p>
<p>可用自动化脚本启动：<code>start-all.sh</code>，不能安装pdsh（卸载：<code>sudo apt remove pdsh</code>）</p>
<p>停止的脚本（下课之前停止）：<code>stop-all.sh</code></p>
<p>启动完了之后，用jps检测 e.g.</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231232141492.png"
        data-srcset="/asserts/bigdata/image-20231231232141492.png, /asserts/bigdata/image-20231231232141492.png 1.5x, /asserts/bigdata/image-20231231232141492.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231232141492.png"
        title="image-20231231232141492" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231232311736.png"
        data-srcset="/asserts/bigdata/image-20231231232311736.png, /asserts/bigdata/image-20231231232311736.png 1.5x, /asserts/bigdata/image-20231231232311736.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231232311736.png"
        title="image-20231231232311736" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231232415565.png"
        data-srcset="/asserts/bigdata/image-20231231232415565.png, /asserts/bigdata/image-20231231232415565.png 1.5x, /asserts/bigdata/image-20231231232415565.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231232415565.png"
        title="image-20231231232415565" /></p>
<p>web页面检测:（域名+9870…）启动成功。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231232725095.png"
        data-srcset="/asserts/bigdata/image-20231231232725095.png, /asserts/bigdata/image-20231231232725095.png 1.5x, /asserts/bigdata/image-20231231232725095.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231232725095.png"
        title="image-20231231232725095" /></p>
<p>Overview:（Summary :Security is off Safemode is off）</p>
<p>一般使用Utilities</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231232844709.png"
        data-srcset="/asserts/bigdata/image-20231231232844709.png, /asserts/bigdata/image-20231231232844709.png 1.5x, /asserts/bigdata/image-20231231232844709.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231232844709.png"
        title="image-20231231232844709" /></p>
<ul>
<li>上传一个文件(e.g. jdk)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -put jdk-8u351-linux-x64.tar.gz /
</span></span></code></pre></div><p>*传到默认文件系统；</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231233142831.png"
        data-srcset="/asserts/bigdata/image-20231231233142831.png, /asserts/bigdata/image-20231231233142831.png 1.5x, /asserts/bigdata/image-20231231233142831.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231233142831.png"
        title="image-20231231233142831" /></p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231233219888.png"
        data-srcset="/asserts/bigdata/image-20231231233219888.png, /asserts/bigdata/image-20231231233219888.png 1.5x, /asserts/bigdata/image-20231231233219888.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231233219888.png"
        title="image-20231231233219888" /></p>
<p>*可通过web页面知道文件具体存到了哪里。</p>
<h3 id="220-节点启动异常">*2.2.0 节点启动异常：</h3>
<p>去看log文件</p>
<p>进入<code>hadoopData/HADOOP_LOG_DIR</code></p>
<p>哪个节点出了问题，就进入相应文件夹寻找相关的log服务。（可启用less/vim 查看）</p>
<p>笔记本出问题，很有可能是网络原因</p>
<h1 id="3-hdfs命令">3 hdfs命令</h1>
<p>命令行帮助：<code>hadoop fs</code></p>
<h2 id="31-远程集群使用">3.1 远程集群使用</h2>
<p>两种用法：(1)修改配置文件：fs.defaultFS; (2)在命令中，直接写入hdfs的位置。</p>
<p><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/asserts/bigdata/image-20231231233826843.png"
        data-srcset="/asserts/bigdata/image-20231231233826843.png, /asserts/bigdata/image-20231231233826843.png 1.5x, /asserts/bigdata/image-20231231233826843.png 2x"
        data-sizes="auto"
        alt="/asserts/bigdata/image-20231231233826843.png"
        title="image-20231231233826843" /></p>
<h3 id="-mkdir">-mkdir</h3>
<pre tabindex="0"><code>`hadoop fs -mkdir hdfs`的URI/路径
</code></pre><p>如果hdfs的URI与配置文件相同，可以省略。</p>
<p>e.g.(连上远程的集群)：</p>
<pre tabindex="0"><code>hadoop fs -mkdir hdfs://172.21.2.6:9000/`学号`
</code></pre><h3 id="-ls">-ls</h3>
<p>文件系统列表显示</p>
<p>命令格式：</p>
<pre tabindex="0"><code>hadoop fs -ls hdfs的URI/路径
</code></pre><p>e.g. 连上远程的集群:</p>
<pre tabindex="0"><code>hadoop fs -ls hdfs://172.21.2.6:9000/`学号`
</code></pre><h3 id="-put---copyfromlocal">-put  -copyFromLocal</h3>
<p>从本地系统拷贝文件到hdfs：</p>
<p>命令格式：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -put <span style="color:#f92672">[</span>文件<span style="color:#f92672">]</span> hdfs的URI/路径/文件名
</span></span></code></pre></div><p>同名上传可以省略文件名，e.g.:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -put aa.txt hdfs://172.21.2.6:9000/<span style="color:#e6db74">`</span>学号<span style="color:#e6db74">`</span>
</span></span></code></pre></div><p>可以在web页面上观察一下是否正常。</p>
<h3 id="-get--copytolocal">-get -copyToLocal</h3>
<p>从hdfs拷贝文件到本地</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -get <span style="color:#f92672">[</span>文件<span style="color:#f92672">]</span> hdfs的URI/路径/文件名 本地路径/文件名
</span></span></code></pre></div><p>同名可以省略本地路径上的文件名 e.g.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -get hdfs://172.21.2.6:9000/2021123456/aa.txt ~/bb.txt
</span></span></code></pre></div><h3 id="-cat">-cat</h3>
<p>显示hdfs文件内容。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -cat hdfs的URI/路径/文件名
</span></span></code></pre></div><h3 id="-appendtofile">-appendToFile</h3>
<p>向hdfs文件增加内容。但需要调整节点数。namenode新建目录，datanode存文件 e.g.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -appendToFile aa.txt hdfs://172.21.2.6:9000/<span style="color:#e6db74">`</span>学号<span style="color:#e6db74">`</span>/aa.txt
</span></span></code></pre></div><h3 id="-cp">-cp</h3>
<p>在hdfs中进行文件或目录拷贝。</p>
<h3 id="-movefromlocal--movetolocal--mv">-moveFromLocal, -moveToLocal, -mv</h3>
<p>文件移动</p>
<h3 id="-rm">-rm</h3>
<p>删除文件和目录。如果误删除了能恢复吗？</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -rm /b.txt
</span></span></code></pre></div><h3 id="-rmdir">-rmdir</h3>
<p>删除目录（要求是空目录）e.g.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>hadoop fs -rmdir /012345678  失败，目录非空
</span></span><span style="display:flex;"><span>hadoop fs -rm -rf /012345678   成功
</span></span></code></pre></div><h3 id="-touch">-touch</h3>
<p>创建一个文件；</p>
<h2 id="32-hdfs文件对应本地文件">3.2 hdfs文件对应本地文件</h2>
<p>从web页面查看文件存储位置和Block id，</p>
<p>……[此处应有图]</p>
<p>进入相应节点，找到对应的Block id文件</p>
<p>[不停进入一层层目录…… dingtalk_l8_55min 下回自查]</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>cat blk_<span style="color:#e6db74">`</span>blk_id<span style="color:#e6db74">`</span>
</span></span></code></pre></div></div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>Updated on 2024-01-03</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="Share on Twitter" data-sharer="twitter" data-url="http://example.org/posts/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/" data-title="hadoop完全分布式集集群配置" data-via="xxxx"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://example.org/posts/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Hacker News" data-sharer="hackernews" data-url="http://example.org/posts/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/" data-title="hadoop完全分布式集集群配置"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on Line" data-sharer="line" data-url="http://example.org/posts/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/" data-title="hadoop完全分布式集集群配置"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://example.org/posts/l1hadoop%E5%AE%8C%E5%85%A8%E5%88%86%E5%B8%83%E5%BC%8F%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE/" data-title="hadoop完全分布式集集群配置"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/l2scala%E8%AF%AD%E8%A8%80%E5%85%A5%E9%97%A8/" class="prev" rel="prev" title="scala语言入门"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>scala语言入门</a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.101.0">Hugo</a> | Theme - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2023 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank"></a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp">????</span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
